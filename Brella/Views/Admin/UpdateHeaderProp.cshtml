
@{
    ViewData["Title"] = "ویرایش مشخصات";
}

@model List<ElementProp>

<section>
    <div class="w-100 pt-170 pb-150 dark-layer3 opc7 position-relative">
        <div class="fixed-bg" style="background-image: url(/assets/images/pagetop-bg.jpg);"></div>
        <div class="container">
            <div class="page-top-wrap w-100">
            </div>
        </div>
    </div>
</section>
<section style="margin-top: 15px">
    <div class="w-100 pb-100 position-relative">
        <div class="container">
            <form asp-action="updateheaderprop" asp-controller="crud" enctype="multipart/form-data" method="post"
                  class="contact-form text-center w-100">
                @foreach (var item in Model)
                {
                    <h3 style="margin-top: 30px">ویرایش @item.language.faTitle توضیحات</h3>
                    if (item.language.faTitle == "فارسی")
                    {
                        <div class="col-md-12 col-sm-12 col-lg-12 custom-file" style="margin-top: 15px">
                            <input name="mainLogo" id="mainLogo" class="fname custom-file-input" accept=".png" type="file" />
                            <label class="d-block custom-file-label text-center">لوگو اصلی</label>
                        </div>
                        <img width="250" src="@($"data:image/jpeg;base64,{Convert.ToBase64String(item.mainLogo)}")" style="margin-top: 15px; border-radius: 15px" id="mainLogoImg" />
                        
                        <div class="col-md-12 col-sm-12 col-lg-12 custom-file" style="margin-top: 15px">
                            <input name="secondaryLogo" id="secondaryLogo" class="fname custom-file-input" accept=".png" type="file" />
                            <label class="d-block custom-file-label text-center">لوگو فرعی</label>
                        </div>
                        <img width="50" src="@($"data:image/jpeg;base64,{Convert.ToBase64String(item.secondaryLogo)}")" style="margin-top: 15px; border-radius: 15px" id="secondaryLogoImg" />
                    }

                    <div class="row" style="margin-top: 20px">
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <label class="d-block">آدرس</label>
                            <input name="Address" value="@(item.address != null ? item.address : "")" class="fname" type="text">
                        </div>
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <label class="d-block">ایمیل</label>
                            <input name="Email" value="@(item.email != null ? item.email : "")" class="fname" type="text" />
                        </div>
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <label class="d-block">شماره تلفن</label>
                            <input name="PhoneNumber" value="@(item.phoneNumber != null ? item.phoneNumber : "")" class="fname" type="text">
                        </div>
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <label class="d-block">لینک اینستاگرام</label>
                            <input name="InstaLink" value="@(item.instaLink != null ? item.instaLink : "")" class="fname" type="text">
                        </div>
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <label class="d-block">لینک تلگرام</label>
                            <input name="TelegramLink" value="@(item.telegramLink != null ? item.telegramLink : "")" class="fname" type="text">
                        </div>
                    </div>
                    <input name="languageIds" value="@item.languageId" hidden />
                }

                <button id="mainupdatebtn" hidden></button>
            </form>
            <div class="col-md-12 col-sm-12 col-lg-12" style="margin-top: 30px">
                <button id="secondupdatebtn" class="thm-btn thm-bg">
                    ثبت<i class="flaticon-arrow-pointing-to-left"></i>
                </button>
            </div>
        </div>
    </div>
</section>

<script>
    $(function () {
        $(secondupdatebtn).click(function () {
            Swal.fire({
                title: 'ویرایش فیلد',
                text: "فیلد مورد نظر ویرایش شود؟",
                icon: 'question',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'بله',
                cancelButtonText: 'بازگشت'

            }).then((result) => {
                if (result.isConfirmed) {
                    $(mainupdatebtn).click()
                }
            })
        })
    })

    $(function () {
        $(mainLogo).change(function () {
            var reader = new FileReader

            reader.readAsDataURL(mainLogo.files[0])
            reader.onloadend = (x) => {
                mainLogoImg.src = x.target.result
            }
        })
    })

    $(function () {
        $(secondaryLogo).change(function () {
            var reader = new FileReader

            reader.readAsDataURL(secondaryLogo.files[0])
            reader.onloadend = (x) => {
                secondaryLogoImg.src = x.target.result
            }
        })
    })
</script>
